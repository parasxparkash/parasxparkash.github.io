<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Building Scalable Microservices with Node.js | Paras Parkash</title>
    <meta name="description" content="A comprehensive guide to architecting and deploying microservices using Node.js, Docker, and Kubernetes. Covers best practices for service communication, data consistency, and monitoring.">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="Building Scalable Microservices with Node.js | Paras Parkash">
    <meta property="og:description" content="A comprehensive guide to architecting and deploying microservices using Node.js, Docker, and Kubernetes. Covers best practices for service communication, data consistency, and monitoring.">
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:title" content="Building Scalable Microservices with Node.js | Paras Parkash">
    <meta property="twitter:description" content="A comprehensive guide to architecting and deploying microservices using Node.js, Docker, and Kubernetes. Covers best practices for service communication, data consistency, and monitoring.">
    
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22></text></svg>">
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    
    <!-- MathJax setup (must load before MathJax library executes) -->
    <script src="/assets/js/mathjax-setup.js"></script>
    <!-- MathJax v3 library -->
    <script id="MathJax-script" defer src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <!-- Polyfill for older browsers (safe to defer) -->
    <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6" crossorigin="anonymous"></script>
    
    
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: {
                        'geist-sans': ['system-ui', '-apple-system', 'BlinkMacSystemFont', 'Segoe UI', 'Roboto', 'sans-serif']
                    },
                    animation: {
                        'fade-in': 'fadeIn 0.6s cubic-bezier(0.16, 1, 0.3, 1) forwards',
                        'slide-in': 'slideIn 0.6s cubic-bezier(0.16, 1, 0.3, 1) forwards',
                        'slide-left': 'slideLeft 0.6s cubic-bezier(0.16, 1, 0.3, 1) forwards'
                    },
                    keyframes: {
                        fadeIn: {
                            '0%': { opacity: '0', transform: 'translateY(20px)' },
                            '100%': { opacity: '1', transform: 'translateY(0)' }
                        },
                        slideIn: {
                            '0%': { opacity: '0', transform: 'translateY(20px)' },
                            '100%': { opacity: '1', transform: 'translateY(0)' }
                        },
                        slideLeft: {
                            '0%': { opacity: '0', transform: 'translateX(-20px)' },
                            '100%': { opacity: '1', transform: 'translateX(0)' }
                        }
                    }
                }
            }
        }
    </script>
    
    <!-- Custom head content -->
<!-- Resource hints for performance -->
<link rel="dns-prefetch" href="//github.com">
<link rel="dns-prefetch" href="//twitter.com">
<link rel="dns-prefetch" href="//linkedin.com">
<link rel="dns-prefetch" href="//ipapi.co">

<!-- Preload critical resources -->
<link rel="preload" href="/assets/profile-optimized.webp" as="image" type="image/webp">
<link rel="preload" href="/assets/medium.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="/assets/medium.css"></noscript>

<!-- Critical CSS for above-the-fold content -->
<style>
    /* Critical CSS - inline for fastest rendering */
    body { margin: 0; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; }
    .text-zinc-900 { color: rgb(24 24 27); }
    .dark .text-zinc-100 { color: rgb(244 244 245); }
    .max-w-7xl { max-width: 80rem; }
    .mx-auto { margin-left: auto; margin-right: auto; }
    .px-4 { padding-left: 1rem; padding-right: 1rem; }
    .py-10 { padding-top: 2.5rem; padding-bottom: 2.5rem; }
    .h-screen { height: 100vh; }
    .flex { display: flex; }
    .flex-col { flex-direction: column; }
    .gap-12 { gap: 3rem; }
    .w-72 { width: 18rem; }
    .flex-shrink-0 { flex-shrink: 0; }
    .sticky { position: sticky; }
    .top-4 { top: 1rem; }
    .h-fit { height: fit-content; }
    .mb-6 { margin-bottom: 1.5rem; }
    .justify-center { justify-content: center; }
    .w-40 { width: 10rem; }
    .h-40 { height: 10rem; }
    .rounded-full { border-radius: 9999px; }
    .object-cover { object-fit: cover; }
    .border-2 { border-width: 2px; }
    .border-zinc-200 { border-color: rgb(228 228 231); }
    .dark .border-zinc-700 { border-color: rgb(63 63 70); }
    
    /* Optimized animation delays - reduced from 8 to 4 for better performance */
    .animate-delay-100 { animation-delay: 0.1s; }
    .animate-delay-200 { animation-delay: 0.2s; }
    .animate-delay-300 { animation-delay: 0.3s; }
    .animate-delay-400 { animation-delay: 0.4s; }
    
    /* Use will-change for better performance on animated elements */
    .opacity-0 { 
        opacity: 0; 
        will-change: opacity;
    }
    .transform { 
        transform: translateY(20px); 
        will-change: transform;
    }
    .transform-x { 
        transform: translateX(-20px); 
        will-change: transform;
    }
    
    /* Dark mode detection */
    @media (prefers-color-scheme: dark) {
        html:not(.light) {
            color-scheme: dark;
        }
    }

    /* Tab styles */
    .tab-content {
        transition: opacity 0.3s ease-in-out, transform 0.3s ease-in-out;
    }
    
    .tab-button.active {
        font-weight: bold !important;
        color: rgb(39 39 42) !important;
    }
    
    .dark .tab-button.active {
        color: rgb(244 244 245) !important;
    }
    
    /* Smooth transitions for all interactive elements */
    a, button {
        transition: all 0.2s ease-in-out;
    }
    
    /* Hide scrollbar in center content area */
    .flex-1.overflow-y-auto {
        scrollbar-width: none; /* Firefox */
        -ms-overflow-style: none; /* Internet Explorer 10+ */
    }
    
    .flex-1.overflow-y-auto::-webkit-scrollbar {
        display: none; /* WebKit */
    }
    
    /* Custom scrollbar for webkit browsers */
    ::-webkit-scrollbar {
        width: 6px;
    }
    
    ::-webkit-scrollbar-track {
        background: transparent;
    }
    
    ::-webkit-scrollbar-thumb {
        background: rgb(161 161 170);
        border-radius: 3px;
    }
    
    .dark ::-webkit-scrollbar-thumb {
        background: rgb(82 82 91);
    }
    
    /* Notes tag styling */
    .note-tag.active {
        background-color: rgb(59 130 246) !important;
        color: white !important;
    }
    
    .dark .note-tag.active {
        background-color: rgb(96 165 250) !important;
        color: white !important;
    }
    
    /* List item hover effects */
    .tab-content li, .tab-content .space-y-6 > div {
        position: relative;
        transition: all 0.3s ease;
        padding-left: 1rem;
    }
    
    .tab-content li::before, .tab-content .space-y-6 > div::before {
        content: '';
        position: absolute;
        left: 0;
        top: 0;
        bottom: 0;
        width: 3px;
        background: rgb(0 0 0);
        opacity: 0;
        transition: opacity 0.3s ease;
    }
    
    .dark .tab-content li::before, .dark .tab-content .space-y-6 > div::before {
        background: rgb(255 255 255);
    }
    
    .tab-content li:hover::before, .tab-content .space-y-6 > div:hover::before {
        opacity: 1;
    }
    
    /* Responsive adjustments */
    
    /* Large screens - Three column layout */
    @media (min-width: 1200px) {
        .flex.gap-12 {
            gap: 3rem;
        }
    }
    
    /* Medium screens - Two column layout (hide right sidebar) */
    @media (max-width: 1199px) and (min-width: 769px) {
        .flex.gap-12 > div:last-child {
            display: none;
        }
        
        .flex.gap-12 {
            gap: 2rem;
        }
    }
    
    /* Small screens - Single column layout */
    @media (max-width: 768px) {
        .flex.gap-12 {
            flex-direction: column;
            gap: 1.5rem;
        }
        
        .w-72 {
            width: 100%;
            max-width: 100%;
        }
        
        /* Show right sidebar again in vertical layout */
        .flex.gap-12 > div:last-child {
            display: block;
        }
        
        /* Adjust main container padding */
        main {
            padding-left: 1rem;
            padding-right: 1rem;
        }
        
        /* Make header more compact on mobile */
        .text-2xl {
            font-size: 1.5rem;
        }
        
        /* Adjust social icons spacing */
        .flex.flex-row.gap-4 {
            gap: 1rem;
        }
        
        /* Make tabs scrollable horizontally on mobile */
        .inline-flex.h-9 {
            overflow-x: auto;
            padding-bottom: 0.5rem;
            -webkit-overflow-scrolling: touch;
        }
        
        /* Adjust tab button sizing for mobile */
        .tab-button {
            white-space: nowrap;
            min-width: fit-content;
        }
    }
    
    /* Extra small screens */
    @media (max-width: 640px) {
        .max-w-3xl {
            max-width: 100%;
        }
        
        .px-4 {
            padding-left: 0.75rem;
            padding-right: 0.75rem;
        }
        
        /* Reduce profile image size on very small screens */
        .w-32.h-32 {
            width: 6rem;
            height: 6rem;
        }
        
        /* Adjust spacing for mobile */
        .mb-6 {
            margin-bottom: 1rem;
        }
        
        .mb-8 {
            margin-bottom: 1.5rem;
        }
        
        /* Make note tags wrap better on mobile */
        .flex.flex-wrap.gap-2 {
            gap: 0.5rem;
        }
        
        /* Adjust footer layout for mobile */
        .flex.justify-between.items-start {
            flex-direction: column;
            gap: 1rem;
        }
        
        .text-right {
            text-align: left;
        }
    }
    
    /* Landscape mobile optimization */
    @media (max-width: 768px) and (orientation: landscape) {
        .flex.gap-12 {
            gap: 1rem;
        }
        
        .mb-6 {
            margin-bottom: 0.75rem;
        }
        
        .mb-8 {
            margin-bottom: 1rem;
        }
    }
    
    /* High DPI screens */
    @media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
        .w-32.h-32 {
            image-rendering: -webkit-optimize-contrast;
            image-rendering: crisp-edges;
        }
    }
    
    /* Mobile sidebar overlay */
    @media (max-width: 1023px) {
        #left-sidebar {
            position: fixed;
            top: 0;
            left: -100%;
            width: 280px;
            height: 100vh;
            background: rgb(255 255 255);
            z-index: 40;
            transition: left 0.3s ease-in-out;
            overflow-y: auto;
            padding: 1rem;
            box-shadow: 2px 0 10px rgba(0, 0, 0, 0.1);
        }
        
        .dark #left-sidebar {
            background: rgb(24 24 27);
            box-shadow: 2px 0 10px rgba(0, 0, 0, 0.3);
        }
        
        #left-sidebar.mobile-open {
            left: 0;
        }
        
        /* Mobile overlay background */
        .mobile-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 30;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease-in-out;
        }
        
        .mobile-overlay.active {
            opacity: 1;
            visibility: visible;
        }
    }
    
    /* Ensure content is properly spaced on mobile */
    @media (max-width: 1023px) {
        main {
            padding-top: 4rem;
            height: 100vh;
            max-height: 100vh;
        }
        
        /* Center title on mobile when menu toggle is visible */
        .mobile-title-center {
            flex-direction: column;
            align-items: center;
            gap: 1rem;
        }
        
        .mobile-center {
            text-align: center;
        }
    }
    
    /* Ensure main container uses full viewport height */
    main {
        height: 100vh;
        max-height: 100vh;
        overflow: hidden;
    }
    
    /* Ensure proper flex behavior */
    .flex-1 {
        min-height: 0;
    }
    
    /* Ensure tabs section can scroll properly */
    .overflow-y-auto {
        min-height: 0;
        flex: 1;
    }
    
    /* Ensure footer stays within viewport */
    footer {
        margin-top: auto;
        flex-shrink: 0;
    }
    
    /* Improve touch targets on mobile */
    @media (max-width: 768px) {
        button, a {
            min-height: 44px;
            min-width: 44px;
        }
        
        .tab-button {
            padding: 0.75rem 1rem;
        }
        
        /* Better spacing for mobile lists */
        .space-y-8 > div {
            margin-bottom: 1.5rem;
        }
        
        /* Improve mobile form elements */
        input, textarea, select {
            font-size: 16px; /* Prevents zoom on iOS */
        }
    }
    
    /* Print styles */
    @media print {
        .mobile-menu-toggle,
        .mobile-overlay,
        #mobile-menu-toggle {
            display: none !important;
        }
        
        body {
            background: white !important;
            color: black !important;
        }
        
        .dark {
            background: white !important;
            color: black !important;
        }
    }
</style>

</head>

<body class="font-geist-sans bg-white overscroll-none dark:bg-zinc-900 transition-colors duration-300">
    <!-- Mobile Overlay -->
    <div class="mobile-overlay" id="mobile-overlay"></div>
    
    <div class="flex gap-8 max-w-8xl mx-auto px-4 py-8">
    <!-- Left Sidebar - Table of Contents -->
    <div class="w-64 flex-shrink-0 sticky top-4 h-fit">
        <div class="bg-zinc-50 dark:bg-zinc-800 rounded-lg p-4">
            <h3 class="font-semibold text-zinc-900 dark:text-zinc-100 mb-4">Table of Contents</h3>
            <nav id="toc" class="space-y-2">
                <!-- Table of contents will be generated by JavaScript -->
            </nav>
        </div>
    </div>
    
    <!-- Main Content -->
    <div class="flex-1 max-w-5xl mt-16">
        <article class="prose prose-zinc dark:prose-invert max-w-none">
            <header class="mb-8">
                <h1 class="text-4xl font-bold mb-2">Building Scalable Microservices with Node.js</h1>
                <time class="text-sm text-zinc-600 dark:text-zinc-400 mb-4 block">January 15, 2024</time>
                
                <div class="flex items-center justify-between mb-4">
                    <div class="flex flex-wrap gap-2">
                        
                        <span class="px-3 py-1 text-xs bg-blue-50 text-blue-700 dark:bg-blue-900/20 dark:text-blue-300 rounded-full">
                            microservices
                        </span>
                        
                        <span class="px-3 py-1 text-xs bg-blue-50 text-blue-700 dark:bg-blue-900/20 dark:text-blue-300 rounded-full">
                            nodejs
                        </span>
                        
                        <span class="px-3 py-1 text-xs bg-blue-50 text-blue-700 dark:bg-blue-900/20 dark:text-blue-300 rounded-full">
                            docker
                        </span>
                        
                        <span class="px-3 py-1 text-xs bg-blue-50 text-blue-700 dark:bg-blue-900/20 dark:text-blue-300 rounded-full">
                            kubernetes
                        </span>
                        
                    </div>
                    <a href="/" class="inline-flex items-center gap-2 text-sm text-zinc-600 dark:text-zinc-400 hover:text-zinc-900 dark:hover:text-zinc-100 transition-colors">
                        Back to Home
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3"></path>
                        </svg>
                    </a>
                </div>
                
            </header>
            
            

            <div class="post-content">
                <h1 id="building-scalable-microservices-with-nodejs">Building Scalable Microservices with Node.js</h1>

<p>Microservices architecture has become increasingly popular for building large-scale applications. In this comprehensive guide, we’ll explore how to design, build, and deploy scalable microservices using Node.js.</p>

<h2 id="what-are-microservices">What Are Microservices?</h2>

<p>Microservices are a software development approach that structures an application as a collection of loosely coupled services. Each service is:</p>

<ul>
  <li><strong>Independently deployable</strong></li>
  <li><strong>Business capability focused</strong></li>
  <li><strong>Owned by a small team</strong></li>
  <li><strong>Technology agnostic</strong></li>
</ul>

<h2 id="key-benefits">Key Benefits</h2>

<h3 id="1-scalability">1. Scalability</h3>
<p>Each service can be scaled independently based on demand.</p>

<h3 id="2-technology-diversity">2. Technology Diversity</h3>
<p>Teams can choose the best technology stack for each service.</p>

<h3 id="3-fault-isolation">3. Fault Isolation</h3>
<p>Failures in one service don’t necessarily bring down the entire system.</p>

<h3 id="4-team-autonomy">4. Team Autonomy</h3>
<p>Small teams can work independently on their services.</p>

<h2 id="architecture-patterns">Architecture Patterns</h2>

<h3 id="api-gateway-pattern">API Gateway Pattern</h3>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Example API Gateway with Express.js</span>
<span class="kd">const</span> <span class="nx">express</span> <span class="o">=</span> <span class="nf">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">express</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">httpProxy</span> <span class="o">=</span> <span class="nf">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">http-proxy-middleware</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">app</span> <span class="o">=</span> <span class="nf">express</span><span class="p">();</span>

<span class="c1">// Route to user service</span>
<span class="nx">app</span><span class="p">.</span><span class="nf">use</span><span class="p">(</span><span class="dl">'</span><span class="s1">/api/users</span><span class="dl">'</span><span class="p">,</span> <span class="nf">httpProxy</span><span class="p">({</span>
  <span class="na">target</span><span class="p">:</span> <span class="dl">'</span><span class="s1">http://user-service:3001</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">changeOrigin</span><span class="p">:</span> <span class="kc">true</span>
<span class="p">}));</span>

<span class="c1">// Route to order service</span>
<span class="nx">app</span><span class="p">.</span><span class="nf">use</span><span class="p">(</span><span class="dl">'</span><span class="s1">/api/orders</span><span class="dl">'</span><span class="p">,</span> <span class="nf">httpProxy</span><span class="p">({</span>
  <span class="na">target</span><span class="p">:</span> <span class="dl">'</span><span class="s1">http://order-service:3002</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">changeOrigin</span><span class="p">:</span> <span class="kc">true</span>
<span class="p">}));</span>

<span class="nx">app</span><span class="p">.</span><span class="nf">listen</span><span class="p">(</span><span class="mi">3000</span><span class="p">);</span>
</code></pre></div></div>

<h3 id="service-discovery">Service Discovery</h3>
<p>Implement service discovery to handle dynamic service locations:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">consul</span> <span class="o">=</span> <span class="nf">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">consul</span><span class="dl">'</span><span class="p">)();</span>

<span class="c1">// Register service</span>
<span class="nx">consul</span><span class="p">.</span><span class="nx">agent</span><span class="p">.</span><span class="nx">service</span><span class="p">.</span><span class="nf">register</span><span class="p">({</span>
  <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">user-service</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="mi">3001</span><span class="p">,</span>
  <span class="na">check</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">http</span><span class="p">:</span> <span class="dl">'</span><span class="s1">http://localhost:3001/health</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">interval</span><span class="p">:</span> <span class="dl">'</span><span class="s1">10s</span><span class="dl">'</span>
  <span class="p">}</span>
<span class="p">});</span>

<span class="c1">// Discover services</span>
<span class="kd">const</span> <span class="nx">getService</span> <span class="o">=</span> <span class="k">async </span><span class="p">(</span><span class="nx">serviceName</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">services</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">consul</span><span class="p">.</span><span class="nx">health</span><span class="p">.</span><span class="nf">service</span><span class="p">(</span><span class="nx">serviceName</span><span class="p">);</span>
  <span class="k">return</span> <span class="nx">services</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">Service</span><span class="p">;</span>
<span class="p">};</span>
</code></pre></div></div>

<h2 id="data-management-strategies">Data Management Strategies</h2>

<h3 id="database-per-service">Database Per Service</h3>
<p>Each microservice should have its own database to ensure loose coupling:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// User Service - MongoDB</span>
<span class="kd">const</span> <span class="nx">mongoose</span> <span class="o">=</span> <span class="nf">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">mongoose</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">mongoose</span><span class="p">.</span><span class="nf">connect</span><span class="p">(</span><span class="dl">'</span><span class="s1">mongodb://user-db:27017/users</span><span class="dl">'</span><span class="p">);</span>

<span class="c1">// Order Service - PostgreSQL</span>
<span class="kd">const</span> <span class="p">{</span> <span class="nx">Pool</span> <span class="p">}</span> <span class="o">=</span> <span class="nf">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">pg</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">pool</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Pool</span><span class="p">({</span>
  <span class="na">host</span><span class="p">:</span> <span class="dl">'</span><span class="s1">order-db</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="mi">5432</span><span class="p">,</span>
  <span class="na">database</span><span class="p">:</span> <span class="dl">'</span><span class="s1">orders</span><span class="dl">'</span>
<span class="p">});</span>
</code></pre></div></div>

<h3 id="event-sourcing">Event Sourcing</h3>
<p>Implement event sourcing for maintaining data consistency:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">EventStore</span> <span class="o">=</span> <span class="nf">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">eventstore</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">eventstore</span> <span class="o">=</span> <span class="nc">EventStore</span><span class="p">({</span>
  <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">mongodb</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">host</span><span class="p">:</span> <span class="dl">'</span><span class="s1">localhost</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="mi">27017</span><span class="p">,</span>
  <span class="na">dbName</span><span class="p">:</span> <span class="dl">'</span><span class="s1">eventstore</span><span class="dl">'</span>
<span class="p">});</span>

<span class="c1">// Store events</span>
<span class="nx">eventstore</span><span class="p">.</span><span class="nf">getEventStream</span><span class="p">(</span><span class="dl">'</span><span class="s1">user-123</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">stream</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">stream</span><span class="p">.</span><span class="nf">addEvent</span><span class="p">({</span>
    <span class="na">eventType</span><span class="p">:</span> <span class="dl">'</span><span class="s1">UserCreated</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">data</span><span class="p">:</span> <span class="p">{</span> <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">John Doe</span><span class="dl">'</span><span class="p">,</span> <span class="na">email</span><span class="p">:</span> <span class="dl">'</span><span class="s1">john@example.com</span><span class="dl">'</span> <span class="p">}</span>
  <span class="p">});</span>
  <span class="nx">stream</span><span class="p">.</span><span class="nf">commit</span><span class="p">();</span>
<span class="p">});</span>
</code></pre></div></div>

<h2 id="communication-patterns">Communication Patterns</h2>

<h3 id="synchronous-communication">Synchronous Communication</h3>
<p>Use HTTP/REST for synchronous service-to-service communication:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">axios</span> <span class="o">=</span> <span class="nf">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">axios</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">getUserOrders</span> <span class="o">=</span> <span class="k">async </span><span class="p">(</span><span class="nx">userId</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="k">try</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">user</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">axios</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="s2">`http://user-service/users/</span><span class="p">${</span><span class="nx">userId</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
    <span class="kd">const</span> <span class="nx">orders</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">axios</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="s2">`http://order-service/orders?userId=</span><span class="p">${</span><span class="nx">userId</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
    
    <span class="k">return</span> <span class="p">{</span>
      <span class="na">user</span><span class="p">:</span> <span class="nx">user</span><span class="p">.</span><span class="nx">data</span><span class="p">,</span>
      <span class="na">orders</span><span class="p">:</span> <span class="nx">orders</span><span class="p">.</span><span class="nx">data</span>
    <span class="p">};</span>
  <span class="p">}</span> <span class="k">catch </span><span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">throw</span> <span class="k">new</span> <span class="nc">Error</span><span class="p">(</span><span class="dl">'</span><span class="s1">Failed to fetch user orders</span><span class="dl">'</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">};</span>
</code></pre></div></div>

<h3 id="asynchronous-communication">Asynchronous Communication</h3>
<p>Use message queues for asynchronous communication:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">amqp</span> <span class="o">=</span> <span class="nf">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">amqplib</span><span class="dl">'</span><span class="p">);</span>

<span class="c1">// Publisher</span>
<span class="kd">const</span> <span class="nx">publishEvent</span> <span class="o">=</span> <span class="k">async </span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">connection</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">amqp</span><span class="p">.</span><span class="nf">connect</span><span class="p">(</span><span class="dl">'</span><span class="s1">amqp://localhost</span><span class="dl">'</span><span class="p">);</span>
  <span class="kd">const</span> <span class="nx">channel</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">connection</span><span class="p">.</span><span class="nf">createChannel</span><span class="p">();</span>
  
  <span class="k">await</span> <span class="nx">channel</span><span class="p">.</span><span class="nf">assertQueue</span><span class="p">(</span><span class="dl">'</span><span class="s1">user.events</span><span class="dl">'</span><span class="p">);</span>
  <span class="nx">channel</span><span class="p">.</span><span class="nf">sendToQueue</span><span class="p">(</span><span class="dl">'</span><span class="s1">user.events</span><span class="dl">'</span><span class="p">,</span> <span class="nx">Buffer</span><span class="p">.</span><span class="k">from</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nf">stringify</span><span class="p">(</span><span class="nx">event</span><span class="p">)));</span>
  
  <span class="k">await</span> <span class="nx">connection</span><span class="p">.</span><span class="nf">close</span><span class="p">();</span>
<span class="p">};</span>

<span class="c1">// Consumer</span>
<span class="kd">const</span> <span class="nx">consumeEvents</span> <span class="o">=</span> <span class="k">async </span><span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">connection</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">amqp</span><span class="p">.</span><span class="nf">connect</span><span class="p">(</span><span class="dl">'</span><span class="s1">amqp://localhost</span><span class="dl">'</span><span class="p">);</span>
  <span class="kd">const</span> <span class="nx">channel</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">connection</span><span class="p">.</span><span class="nf">createChannel</span><span class="p">();</span>
  
  <span class="k">await</span> <span class="nx">channel</span><span class="p">.</span><span class="nf">assertQueue</span><span class="p">(</span><span class="dl">'</span><span class="s1">user.events</span><span class="dl">'</span><span class="p">);</span>
  <span class="nx">channel</span><span class="p">.</span><span class="nf">consume</span><span class="p">(</span><span class="dl">'</span><span class="s1">user.events</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">msg</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">event</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nf">parse</span><span class="p">(</span><span class="nx">msg</span><span class="p">.</span><span class="nx">content</span><span class="p">.</span><span class="nf">toString</span><span class="p">());</span>
    <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Received event:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">event</span><span class="p">);</span>
    <span class="nx">channel</span><span class="p">.</span><span class="nf">ack</span><span class="p">(</span><span class="nx">msg</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">};</span>
</code></pre></div></div>

<h2 id="deployment-with-docker-and-kubernetes">Deployment with Docker and Kubernetes</h2>

<h3 id="dockerfile-example">Dockerfile Example</h3>
<div class="language-dockerfile highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">FROM</span><span class="s"> node:16-alpine</span>

<span class="k">WORKDIR</span><span class="s"> /app</span>

<span class="k">COPY</span><span class="s"> package*.json ./</span>
<span class="k">RUN </span>npm ci <span class="nt">--only</span><span class="o">=</span>production

<span class="k">COPY</span><span class="s"> . .</span>

<span class="k">EXPOSE</span><span class="s"> 3000</span>

<span class="k">USER</span><span class="s"> node</span>

<span class="k">CMD</span><span class="s"> ["npm", "start"]</span>
</code></pre></div></div>

<h3 id="kubernetes-deployment">Kubernetes Deployment</h3>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">apps/v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">Deployment</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">user-service</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">replicas</span><span class="pi">:</span> <span class="m">3</span>
  <span class="na">selector</span><span class="pi">:</span>
    <span class="na">matchLabels</span><span class="pi">:</span>
      <span class="na">app</span><span class="pi">:</span> <span class="s">user-service</span>
  <span class="na">template</span><span class="pi">:</span>
    <span class="na">metadata</span><span class="pi">:</span>
      <span class="na">labels</span><span class="pi">:</span>
        <span class="na">app</span><span class="pi">:</span> <span class="s">user-service</span>
    <span class="na">spec</span><span class="pi">:</span>
      <span class="na">containers</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">user-service</span>
        <span class="na">image</span><span class="pi">:</span> <span class="s">user-service:latest</span>
        <span class="na">ports</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="na">containerPort</span><span class="pi">:</span> <span class="m">3000</span>
        <span class="na">env</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">DATABASE_URL</span>
          <span class="na">valueFrom</span><span class="pi">:</span>
            <span class="na">secretKeyRef</span><span class="pi">:</span>
              <span class="na">name</span><span class="pi">:</span> <span class="s">db-secret</span>
              <span class="na">key</span><span class="pi">:</span> <span class="s">url</span>
<span class="nn">---</span>
<span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">Service</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">user-service</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">selector</span><span class="pi">:</span>
    <span class="na">app</span><span class="pi">:</span> <span class="s">user-service</span>
  <span class="na">ports</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">port</span><span class="pi">:</span> <span class="m">80</span>
    <span class="na">targetPort</span><span class="pi">:</span> <span class="m">3000</span>
  <span class="na">type</span><span class="pi">:</span> <span class="s">ClusterIP</span>
</code></pre></div></div>

<h2 id="monitoring-and-observability">Monitoring and Observability</h2>

<h3 id="health-checks">Health Checks</h3>
<p>Implement health check endpoints:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">app</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">/health</span><span class="dl">'</span><span class="p">,</span> <span class="k">async </span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">health</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">service</span><span class="p">:</span> <span class="dl">'</span><span class="s1">user-service</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">status</span><span class="p">:</span> <span class="dl">'</span><span class="s1">healthy</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">timestamp</span><span class="p">:</span> <span class="k">new</span> <span class="nc">Date</span><span class="p">().</span><span class="nf">toISOString</span><span class="p">(),</span>
    <span class="na">checks</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">database</span><span class="p">:</span> <span class="k">await</span> <span class="nf">checkDatabase</span><span class="p">(),</span>
      <span class="na">externalService</span><span class="p">:</span> <span class="k">await</span> <span class="nf">checkExternalService</span><span class="p">()</span>
    <span class="p">}</span>
  <span class="p">};</span>
  
  <span class="kd">const</span> <span class="nx">isHealthy</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nf">values</span><span class="p">(</span><span class="nx">health</span><span class="p">.</span><span class="nx">checks</span><span class="p">).</span><span class="nf">every</span><span class="p">(</span><span class="nx">check</span> <span class="o">=&gt;</span> <span class="nx">check</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">healthy</span><span class="dl">'</span><span class="p">);</span>
  <span class="nx">res</span><span class="p">.</span><span class="nf">status</span><span class="p">(</span><span class="nx">isHealthy</span> <span class="p">?</span> <span class="mi">200</span> <span class="p">:</span> <span class="mi">503</span><span class="p">).</span><span class="nf">json</span><span class="p">(</span><span class="nx">health</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div></div>

<h3 id="distributed-tracing">Distributed Tracing</h3>
<p>Use tools like Jaeger or Zipkin for distributed tracing:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">opentracing</span> <span class="o">=</span> <span class="nf">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">opentracing</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">jaeger</span> <span class="o">=</span> <span class="nf">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">jaeger-client</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">config</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">serviceName</span><span class="p">:</span> <span class="dl">'</span><span class="s1">user-service</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">sampler</span><span class="p">:</span> <span class="p">{</span> <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">const</span><span class="dl">'</span><span class="p">,</span> <span class="na">param</span><span class="p">:</span> <span class="mi">1</span> <span class="p">}</span>
<span class="p">};</span>

<span class="kd">const</span> <span class="nx">tracer</span> <span class="o">=</span> <span class="nx">jaeger</span><span class="p">.</span><span class="nf">initTracer</span><span class="p">(</span><span class="nx">config</span><span class="p">);</span>
<span class="nx">opentracing</span><span class="p">.</span><span class="nf">initGlobalTracer</span><span class="p">(</span><span class="nx">tracer</span><span class="p">);</span>

<span class="c1">// Create spans</span>
<span class="kd">const</span> <span class="nx">span</span> <span class="o">=</span> <span class="nx">tracer</span><span class="p">.</span><span class="nf">startSpan</span><span class="p">(</span><span class="dl">'</span><span class="s1">get-user</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">span</span><span class="p">.</span><span class="nf">setTag</span><span class="p">(</span><span class="dl">'</span><span class="s1">user.id</span><span class="dl">'</span><span class="p">,</span> <span class="nx">userId</span><span class="p">);</span>
<span class="c1">// ... perform operation</span>
<span class="nx">span</span><span class="p">.</span><span class="nf">finish</span><span class="p">();</span>
</code></pre></div></div>

<h2 id="best-practices">Best Practices</h2>

<ol>
  <li><strong>Start with a Monolith</strong>: Don’t begin with microservices; extract them as your application grows</li>
  <li><strong>Design for Failure</strong>: Implement circuit breakers, retries, and timeouts</li>
  <li><strong>Automate Everything</strong>: Use CI/CD pipelines for consistent deployments</li>
  <li><strong>Monitor Extensively</strong>: Implement comprehensive logging, metrics, and tracing</li>
  <li><strong>Secure by Default</strong>: Implement authentication, authorization, and encryption</li>
</ol>

<h2 id="conclusion">Conclusion</h2>

<p>Building scalable microservices with Node.js requires careful planning, proper tooling, and adherence to best practices. While the complexity increases compared to monolithic applications, the benefits of scalability, maintainability, and team autonomy make it worthwhile for large-scale systems.</p>

<p>Remember that microservices are not a silver bullet—they come with their own set of challenges including distributed system complexity, data consistency issues, and operational overhead. Choose this architecture pattern when it aligns with your team structure and business requirements.</p>

<hr />

<p><em>Want to learn more about microservices? Check out my other posts on <a href="/tags/distributed-systems">distributed systems</a> and <a href="/tags/devops">DevOps practices</a>.</em></p>

            </div>
            
            <footer class="mt-12 pt-8 border-t border-zinc-200 dark:border-zinc-700">
                <div class="flex items-center justify-between">
                    <a href="/posts" class="inline-flex items-center gap-2 text-sm text-zinc-600 dark:text-zinc-400 hover:text-zinc-900 dark:hover:text-zinc-100 transition-colors">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path>
                        </svg>
                        All Posts
                    </a>
                    <a href="/" class="inline-flex items-center gap-2 text-sm text-zinc-600 dark:text-zinc-400 hover:text-zinc-900 dark:hover:text-zinc-100 transition-colors">
                        Homepage
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3"></path>
                        </svg>
                    </a>
                </div>
            </footer>
        </article>
    </div>
    
    <!-- Right Sidebar - Posts List -->
    <div class="w-72 flex-shrink-0 sticky top-4 h-fit">
        <h3 class="text-lg font-semibold mb-6 text-zinc-900 dark:text-zinc-100">Other Posts</h3>
        <div class="space-y-4">
            
            
            <div class="post-item">
                <h4 class="font-medium text-zinc-900 dark:text-zinc-100 text-sm mb-2">Am I Really Living, Or Just Wasting Time?</h4>
                <time class="text-xs text-zinc-500 dark:text-zinc-400 mb-2 block">August 24, 2025</time>
                <p class="text-xs text-zinc-600 dark:text-zinc-400 mb-3">Most days I catch myself wondering: am I really living, or just wasting time?...</p>
                <div class="flex gap-1">
                    
                    <span class="px-2 py-1 text-xs bg-blue-50 text-blue-700 dark:bg-blue-900/20 dark:text-blue-300 rounded">Stoicism</span>
                    
                    <span class="px-2 py-1 text-xs bg-blue-50 text-blue-700 dark:bg-blue-900/20 dark:text-blue-300 rounded">Philosophy</span>
                    
                </div>
                <div class="mt-2">
                    <a href="/2025/08/24/am-i-really-living-or-just-wasting-time.html" class="text-xs text-zinc-500 dark:text-zinc-400 hover:text-zinc-900 dark:hover:text-zinc-100 transition-colors">
                        Read →
                    </a>
                </div>
            </div>
            
            
            
            
            
            <div class="post-item">
                <h4 class="font-medium text-zinc-900 dark:text-zinc-100 text-sm mb-2">Modern React Patterns and Performance</h4>
                <time class="text-xs text-zinc-500 dark:text-zinc-400 mb-2 block">January 10, 2024</time>
                <p class="text-xs text-zinc-600 dark:text-zinc-400 mb-3">Modern React Patterns and Performance

React has evolved significantly since ...</p>
                <div class="flex gap-1">
                    
                    <span class="px-2 py-1 text-xs bg-blue-50 text-blue-700 dark:bg-blue-900/20 dark:text-blue-300 rounded">React</span>
                    
                    <span class="px-2 py-1 text-xs bg-blue-50 text-blue-700 dark:bg-blue-900/20 dark:text-blue-300 rounded">Javascript</span>
                    
                </div>
                <div class="mt-2">
                    <a href="/blog/frontend/2024/01/10/modern-react-patterns.html" class="text-xs text-zinc-500 dark:text-zinc-400 hover:text-zinc-900 dark:hover:text-zinc-100 transition-colors">
                        Read →
                    </a>
                </div>
            </div>
            
            
        </div>
    </div>
</div>

<script>
// JavaScript for TOC generation and scroll tracking
document.addEventListener('DOMContentLoaded', function() {
    const toc = document.getElementById('toc');
    const headings = document.querySelectorAll('.post-content h1, .post-content h2, .post-content h3, .post-content h4');
    
    headings.forEach((heading, index) => {
        if (!heading.id) {
            heading.id = `heading-${index}`;
        }
        const link = document.createElement('a');
        link.href = `#${heading.id}`;
        link.textContent = heading.textContent;
        link.className = `block text-sm text-zinc-600 dark:text-zinc-400 hover:text-zinc-900 dark:hover:text-zinc-100 transition-colors ${heading.tagName.toLowerCase() === 'h1' ? 'font-semibold' : heading.tagName.toLowerCase() === 'h2' ? 'ml-2' : 'ml-4'}`;
        const item = document.createElement('div');
        item.className = 'py-1';
        item.appendChild(link);
        toc.appendChild(item);
    });
    
    toc.addEventListener('click', function(e) {
        if (e.target.tagName === 'A') {
            e.preventDefault();
            const targetId = e.target.getAttribute('href').substring(1);
            const targetElement = document.getElementById(targetId);
            if (targetElement) {
                targetElement.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
        }
    });
    
    const observerOptions = { rootMargin: '-20% 0px -80% 0px' };
    const observer = new IntersectionObserver(function(entries) {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                toc.querySelectorAll('a').forEach(link => {
                    link.classList.remove('text-blue-600', 'dark:text-blue-400', 'font-medium');
                });
                const currentLink = toc.querySelector(`a[href="#${entry.target.id}"]`);
                if (currentLink) {
                    currentLink.classList.add('text-blue-600', 'dark:text-blue-400', 'font-medium');
                }
            }
        });
    }, observerOptions);
    
    headings.forEach(heading => { observer.observe(heading); });
});
</script>

    
    <script>
    // Theme toggle functionality
    const themeToggle = document.getElementById('theme-toggle');
    const html = document.documentElement;
    
    // Check for saved theme preference or default to 'light'
    const currentTheme = localStorage.getItem('theme') || 
                       (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
    
    if (currentTheme === 'dark') {
        html.classList.add('dark');
    }

    if (themeToggle) {
        themeToggle.addEventListener('click', function() {
            html.classList.toggle('dark');
            
            const theme = html.classList.contains('dark') ? 'dark' : 'light';
            localStorage.setItem('theme', theme);
        });
    }

    // Tab functionality
    function showTab(tabName) {
        // Hide all tab contents
        const tabContents = document.querySelectorAll('.tab-content');
        tabContents.forEach(content => {
            content.classList.add('hidden');
            content.classList.remove('opacity-0', 'transform');
        });
        
        // Remove active class from all buttons
        const tabButtons = document.querySelectorAll('.tab-button');
        tabButtons.forEach(button => {
            button.classList.remove('active');
            button.classList.remove('!font-bold', '!text-neutral-800', 'dark:!text-neutral-100');
            button.classList.add('!font-light', '!text-neutral-400', 'dark:!text-neutral-400');
        });
        
        // Show selected tab content
        const selectedContent = document.getElementById(`content-${tabName}`);
        if (selectedContent) {
            selectedContent.classList.remove('hidden');
            
            // Add active class to selected button
            const selectedButton = document.getElementById(`tab-${tabName}`);
            if (selectedButton) {
                selectedButton.classList.add('active');
                selectedButton.classList.remove('!font-light', '!text-neutral-400', 'dark:!text-neutral-400');
                selectedButton.classList.add('!font-bold', '!text-neutral-800', 'dark:!text-neutral-100');
            }
            
            // Trigger animations for the new content
            setTimeout(() => {
                selectedContent.classList.add('opacity-0', 'transform');
                selectedContent.classList.add('animate-fade-in');
                
                // Animate list items if they exist
                const listItems = selectedContent.querySelectorAll('li, .space-y-6 > div');
                listItems.forEach((item, index) => {
                    item.classList.add('opacity-0', 'transform-x');
                    item.classList.add('animate-slide-left');
                    item.style.animationDelay = `${(index + 1) * 0.1}s`;
                });
            }, 10);
        }
    }

    // User System Detection
    function detectUserSystem() {
        const userAgent = navigator.userAgent;
        let os = 'Unknown OS';
        let browser = 'Unknown Browser';
        
        // Detect OS
        if (userAgent.indexOf('Win') !== -1) os = 'Windows';
        else if (userAgent.indexOf('Mac') !== -1) os = 'macOS';
        else if (userAgent.indexOf('Linux') !== -1) os = 'Linux';
        else if (userAgent.indexOf('Android') !== -1) os = 'Android';
        else if (userAgent.indexOf('iPhone') !== -1 || userAgent.indexOf('iPad') !== -1) os = 'iOS';
        
        // Detect Browser
        if (userAgent.indexOf('Chrome') !== -1 && userAgent.indexOf('Edg') === -1) browser = 'Chrome';
        else if (userAgent.indexOf('Firefox') !== -1) browser = 'Firefox';
        else if (userAgent.indexOf('Safari') !== -1 && userAgent.indexOf('Chrome') === -1) browser = 'Safari';
        else if (userAgent.indexOf('Edg') !== -1) browser = 'Edge';
        else if (userAgent.indexOf('Opera') !== -1) browser = 'Opera';
        
        // Get screen resolution
        const screenRes = `${screen.width}x${screen.height}`;
        
        // Get timezone
        const timezone = Intl.DateTimeFormat().resolvedOptions().timeZone;
        
        return ` ${os} • ${browser} • ${screenRes} • ${timezone}`;
    }

    // User Location Detection (disabled to avoid external request)
    async function detectUserLocation() {
        return '';
    }
    
    // Combined user info function
    async function updateUserInfo() {
        const systemInfo = detectUserSystem();
        const locationInfo = await detectUserLocation();
        const line = locationInfo ? `${systemInfo} • ${locationInfo}` : systemInfo;
        const userInfoElement = document.getElementById('user-info');
        if (userInfoElement) {
            userInfoElement.textContent = line;
        }
    }

    // IST Clock functionality
    function updateISTClock() {
        const now = new Date();
        const istTime = new Date(now.toLocaleString("en-US", {timeZone: "Asia/Kolkata"}));
        
        const timeString = istTime.toLocaleTimeString('en-US', {
            hour12: true,
            hour: 'numeric',
            minute: '2-digit',
            second: '2-digit'
        });
        
        const dayString = istTime.toLocaleDateString('en-US', {
            weekday: 'short',
            day: 'numeric',
            month: 'short'
        });
        
        const clockElement = document.getElementById('ist-clock');
        if (clockElement) {
            clockElement.textContent = `${dayString}, ${timeString} IST`;
        }
    }

    // Service Worker Registration for caching
    if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
            navigator.serviceWorker.register('/assets/sw.js')
                .then(registration => {
                    console.log('SW registered: ', registration);
                })
                .catch(registrationError => {
                    console.log('SW registration failed: ', registrationError);
                });
        });
    }

    // Performance monitoring
    if ('performance' in window) {
        window.addEventListener('load', () => {
            setTimeout(() => {
                const perfData = performance.getEntriesByType('navigation')[0];
                console.log('Page Load Time:', perfData.loadEventEnd - perfData.loadEventStart, 'ms');
                console.log('DOM Content Loaded:', perfData.domContentLoadedEventEnd - perfData.domContentLoadedEventStart, 'ms');
            }, 0);
        });
    }

    // Initialize animations when page loads
    document.addEventListener('DOMContentLoaded', function() {
        // Use requestIdleCallback for non-critical animations
        if ('requestIdleCallback' in window) {
            requestIdleCallback(() => {
                // Trigger all initial animations
                const animatedElements = document.querySelectorAll('.opacity-0');
                animatedElements.forEach(el => {
                    el.classList.remove('opacity-0');
                    if (el.classList.contains('transform')) {
                        el.classList.remove('transform');
                    }
                    if (el.classList.contains('transform-x')) {
                        el.classList.remove('transform-x');
                    }
                });
            });
        } else {
            // Fallback for browsers without requestIdleCallback
            setTimeout(() => {
                const animatedElements = document.querySelectorAll('.opacity-0');
                animatedElements.forEach(el => {
                    el.classList.remove('opacity-0');
                    if (el.classList.contains('transform')) {
                        el.classList.remove('transform');
                    }
                    if (el.classList.contains('transform-x')) {
                        el.classList.remove('transform-x');
                    }
                });
            }, 100);
        }
        
        // Set initial active tab
        showTab('projects');
        
        // Initialize and start the IST clock
        updateISTClock();
        setInterval(updateISTClock, 1000);
        
        // Initialize user system and location detection with delay
        setTimeout(updateUserInfo, 2000);
    });

    // Notes filtering functionality
    function filterNotes(tag) {
        // Update active tag button
        document.querySelectorAll('.note-tag').forEach(btn => {
            btn.classList.remove('active', 'bg-blue-500', 'text-white', 'dark:bg-blue-400', 'dark:text-white');
            btn.classList.add('bg-zinc-200', 'dark:bg-zinc-700', 'text-zinc-700', 'dark:text-zinc-300');
        });
        
        // Highlight active button
        const activeButton = event.target;
        activeButton.classList.remove('bg-zinc-200', 'dark:bg-zinc-700', 'text-zinc-700', 'dark:text-zinc-300');
        activeButton.classList.add('active', 'bg-blue-500', 'text-white', 'dark:bg-blue-400', 'dark:text-white');
        
        // Filter note items
        const noteItems = document.querySelectorAll('.note-item');
        noteItems.forEach(item => {
            const itemTags = item.getAttribute('data-tags').split(',');
            if (tag === 'all' || itemTags.includes(tag)) {
                item.style.display = 'block';
                item.style.opacity = '1';
            } else {
                item.style.display = 'none';
                item.style.opacity = '0';
            }
        });
    }

    // Mobile menu functionality
    const mobileMenuToggle = document.getElementById('mobile-menu-toggle');
    const leftSidebar = document.getElementById('left-sidebar');
    const mobileOverlay = document.getElementById('mobile-overlay');
    
    function toggleMobileMenu() {
        if (leftSidebar && mobileOverlay) {
            leftSidebar.classList.toggle('mobile-open');
            mobileOverlay.classList.toggle('active');
            
            // Prevent body scroll when menu is open
            if (leftSidebar.classList.contains('mobile-open')) {
                document.body.style.overflow = 'hidden';
            } else {
                document.body.style.overflow = '';
            }
        }
    }
    
    function closeMobileMenu() {
        if (leftSidebar && mobileOverlay) {
            leftSidebar.classList.remove('mobile-open');
            mobileOverlay.classList.remove('active');
            document.body.style.overflow = '';
        }
    }
    
    // Event listeners
    if (mobileMenuToggle) {
        mobileMenuToggle.addEventListener('click', toggleMobileMenu);
    }
    
    if (mobileOverlay) {
        mobileOverlay.addEventListener('click', closeMobileMenu);
    }
    
    // Close menu on escape key
    document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape' && leftSidebar && leftSidebar.classList.contains('mobile-open')) {
            closeMobileMenu();
        }
    });
    
    // Close menu on window resize (if switching to desktop)
    window.addEventListener('resize', function() {
        if (window.innerWidth > 1023 && leftSidebar && leftSidebar.classList.contains('mobile-open')) {
            closeMobileMenu();
        }
    });
    
    // Touch gesture support for mobile
    let touchStartX = 0;
    let touchEndX = 0;
    
    document.addEventListener('touchstart', function(e) {
        touchStartX = e.changedTouches[0].screenX;
    });
    
    document.addEventListener('touchend', function(e) {
        touchEndX = e.changedTouches[0].screenX;
        handleSwipe();
    });
    
    function handleSwipe() {
        const swipeThreshold = 50;
        const swipeDistance = touchEndX - touchStartX;
        
        // Swipe right to open menu
        if (swipeDistance > swipeThreshold && touchStartX < 50) {
            if (leftSidebar && !leftSidebar.classList.contains('mobile-open')) {
                toggleMobileMenu();
            }
        }
        
        // Swipe left to close menu
        if (swipeDistance < -swipeThreshold && leftSidebar && leftSidebar.classList.contains('mobile-open')) {
            closeMobileMenu();
        }
    }

    // Smooth scrolling for any anchor links
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
            e.preventDefault();
            const target = document.querySelector(this.getAttribute('href'));
            if (target) {
                target.scrollIntoView({
                    behavior: 'smooth',
                    block: 'start'
                });
            }
        });
    });
</script>

</body>
</html>
