<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, minimum-scale=1.0">
    
    <!-- Primary Meta Tags -->
    <title>{% if page.title %}{{ page.title }} | {% endif %}{{ site.title }}</title>
    <meta name="title" content="{% if page.title %}{{ page.title }} | {% endif %}{{ site.title }}">
    <meta name="description" content="{% if page.description %}{{ page.description }}{% else %}{{ site.description }}{% endif %}">
    <meta name="keywords" content="{% if page.keywords %}{{ page.keywords }}{% else %}quantitative finance, derivatives, risk management, AI, machine learning, Paras Parkash, Chennai, India{% endif %}">
    <meta name="author" content="{{ site.author.name }}">
    <meta name="robots" content="index, follow">
    <meta name="language" content="English">
    <meta name="revisit-after" content="7 days">
    
    <!-- Canonical URL -->
    <link rel="canonical" href="{{ page.url | absolute_url }}">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="{% if page.layout == 'post' %}article{% else %}website{% endif %}">
    <meta property="og:url" content="{{ page.url | absolute_url }}">
    <meta property="og:title" content="{% if page.title %}{{ page.title }} | {% endif %}{{ site.title }}">
    <meta property="og:description" content="{% if page.description %}{{ page.description }}{% else %}{{ site.description }}{% endif %}">
    <meta property="og:image" content="{% if page.image %}{{ page.image | absolute_url }}{% else %}{{ '/assets/profile-optimized.webp' | absolute_url }}{% endif %}">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:image:alt" content="{% if page.title %}{{ page.title }}{% else %}{{ site.title }}{% endif %}">
    <meta property="og:site_name" content="{{ site.title }}">
    <meta property="og:locale" content="en_US">
    {% if page.layout == 'post' %}
    <meta property="article:author" content="{{ site.author.name }}">
    <meta property="article:published_time" content="{{ page.date | date_to_xmlschema }}">
    <meta property="article:modified_time" content="{{ page.last_modified_at | default: page.date | date_to_xmlschema }}">
    {% for tag in page.tags %}
    <meta property="article:tag" content="{{ tag }}">
    {% endfor %}
    {% endif %}
    
    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:url" content="{{ page.url | absolute_url }}">
    <meta name="twitter:title" content="{% if page.title %}{{ page.title }} | {% endif %}{{ site.title }}">
    <meta name="twitter:description" content="{% if page.description %}{{ page.description }}{% else %}{{ site.description }}{% endif %}">
    <meta name="twitter:image" content="{% if page.image %}{{ page.image | absolute_url }}{% else %}{{ '/assets/profile-optimized.webp' | absolute_url }}{% endif %}">
    <meta name="twitter:image:alt" content="{% if page.title %}{{ page.title }}{% else %}{{ site.title }}{% endif %}">
    <meta name="twitter:creator" content="@{{ site.author.twitter }}">
    <meta name="twitter:site" content="@{{ site.author.twitter }}">
    
    <!-- Additional Meta Tags -->
    <meta name="theme-color" content="#000000">
    <meta name="msapplication-TileColor" content="#000000">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="{{ site.title }}">
    
    <!-- Favicon -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22></text></svg>">
    <link rel="apple-touch-icon" href="{{ '/assets/profile-optimized.webp' | relative_url }}">
    
    <!-- Preconnect to external domains -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://cdn.jsdelivr.net">
    <link rel="preconnect" href="https://cdnjs.cloudflare.com">
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    {% if site.mathjax or page.mathjax %}
    <!-- MathJax setup (must load before MathJax library executes) -->
    <script src="{{ '/assets/js/mathjax-setup.js' | relative_url }}"></script>
    <!-- MathJax v3 library -->
    <script id="MathJax-script" defer src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <!-- Polyfill for older browsers (safe to defer) -->
    <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6" crossorigin="anonymous"></script>
    {% endif %}
    
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: {
                        'geist-sans': ['system-ui', '-apple-system', 'BlinkMacSystemFont', 'Segoe UI', 'Roboto', 'sans-serif']
                    },
                    animation: {
                        'fade-in': 'fadeIn 0.6s cubic-bezier(0.16, 1, 0.3, 1) forwards',
                        'slide-in': 'slideIn 0.6s cubic-bezier(0.16, 1, 0.3, 1) forwards',
                        'slide-left': 'slideLeft 0.6s cubic-bezier(0.16, 1, 0.3, 1) forwards'
                    },
                    keyframes: {
                        fadeIn: {
                            '0%': { opacity: '0', transform: 'translateY(20px)' },
                            '100%': { opacity: '1', transform: 'translateY(0)' }
                        },
                        slideIn: {
                            '0%': { opacity: '0', transform: 'translateY(20px)' },
                            '100%': { opacity: '1', transform: 'translateY(0)' }
                        },
                        slideLeft: {
                            '0%': { opacity: '0', transform: 'translateX(-20px)' },
                            '100%': { opacity: '1', transform: 'translateX(0)' }
                        }
                    }
                }
            }
        }
    </script>
    
    <!-- JSON-LD Structured Data -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "{% if page.layout == 'post' %}BlogPosting{% else %}Person{% endif %}",
        {% if page.layout == 'post' %}
        "headline": "{{ page.title }}",
        "description": "{{ page.description | default: page.excerpt | strip_html | truncate: 160 }}",
        "image": "{% if page.image %}{{ page.image | absolute_url }}{% else %}{{ '/assets/profile-optimized.webp' | absolute_url }}{% endif %}",
        "author": {
            "@type": "Person",
            "name": "{{ site.author.name }}",
            "url": "{{ site.url }}",
            "sameAs": [
                "https://github.com/{{ site.author.github }}",
                "https://twitter.com/{{ site.author.twitter }}",
                "https://linkedin.com/in/{{ site.author.linkedin }}",
                "{{ site.author.medium }}"
            ]
        },
        "publisher": {
            "@type": "Person",
            "name": "{{ site.author.name }}",
            "url": "{{ site.url }}"
        },
        "datePublished": "{{ page.date | date_to_xmlschema }}",
        "dateModified": "{{ page.last_modified_at | default: page.date | date_to_xmlschema }}",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "{{ page.url | absolute_url }}"
        },
        "keywords": "{{ page.tags | join: ', ' }}",
        "articleSection": "{{ page.categories | first | default: 'Blog' }}",
        "wordCount": "{{ page.content | number_of_words }}"
        {% else %}
        "name": "{{ site.author.name }}",
        "description": "{{ site.description }}",
        "url": "{{ site.url }}",
        "image": "{{ '/assets/profile-optimized.webp' | absolute_url }}",
        "jobTitle": "Quantitative Researcher",
        "worksFor": {
            "@type": "Organization",
            "name": "QuantEdX Research"
        },
        "address": {
            "@type": "PostalAddress",
            "addressLocality": "Chennai",
            "addressRegion": "Tamil Nadu",
            "addressCountry": "IN"
        },
        "sameAs": [
            "https://github.com/{{ site.author.github }}",
            "https://twitter.com/{{ site.author.twitter }}",
            "https://linkedin.com/in/{{ site.author.linkedin }}",
            "{{ site.author.medium }}",
            "{{ site.author.substack }}"
        ],
        "knowsAbout": [
            "Quantitative Finance",
            "Derivatives",
            "Risk Management",
            "Machine Learning",
            "Artificial Intelligence",
            "Mathematical Finance",
            "Stochastic Calculus"
        ],
        "alumniOf": {
            "@type": "EducationalOrganization",
            "name": "Educational Institution"
        }
        {% endif %}
    }
    </script>

    <!-- Website Schema -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebSite",
        "name": "{{ site.title }}",
        "description": "{{ site.description }}",
        "url": "{{ site.url }}",
        "author": {
            "@type": "Person",
            "name": "{{ site.author.name }}"
        },
        "potentialAction": {
            "@type": "SearchAction",
            "target": {
                "@type": "EntryPoint",
                "urlTemplate": "{{ site.url }}/search?q={search_term_string}"
            },
            "query-input": "required name=search_term_string"
        }
    }
    </script>

    {% include head-custom.html %}
</head>

<body class="font-geist-sans bg-white overscroll-none dark:bg-zinc-900 transition-colors duration-300">
    <!-- Mobile Overlay -->
    <div class="mobile-overlay" id="mobile-overlay"></div>
    
    {{ content }}
    
    {% include scripts.html %}
</body>
</html>
