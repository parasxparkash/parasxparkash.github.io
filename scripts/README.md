# GitHub Contributions Setup for GitHub Pages

This project uses **static JSON files** to display GitHub contributions, since GitHub Pages doesn't support server-side code.

## How It Works

1. **GitHub Actions** runs daily to fetch your contribution data
2. Data is saved as JSON files in `public/data/`
3. Files are committed back to your repository
4. GitHub Pages serves the static JSON files
5. Your website reads and displays the data

## Setup for GitHub Pages

### 1. Enable GitHub Actions

Your repository already has the workflow file at `.github/workflows/update-contributions.yml`

The workflow:
- ✓ Runs automatically every day at midnight UTC
- ✓ Can be triggered manually from Actions tab
- ✓ Uses the built-in `GITHUB_TOKEN` (no setup needed!)
- ✓ Commits updated data back to your repo

### 2. Initial Data Fetch

**Option A: Trigger GitHub Action (Recommended)**
1. Go to your repository on GitHub
2. Click "Actions" tab
3. Click "Update GitHub Contributions" workflow
4. Click "Run workflow" button
5. Wait for it to complete (~30 seconds)

**Option B: Run Locally**
```bash
# Set your token temporarily
$env:GITHUB_TOKEN="your_token_here"

# Run the script
node scripts/fetch-github-contributions.js

# Commit the generated files
git add public/data/
git commit -m "Add initial contribution data"
git push
```

### 3. Verify Data Files

After running, you should have:
```
public/data/
├── contributions-2025.json
└── contributions-2026.json
```

### 4. Deploy to GitHub Pages

Your Next.js site needs to be exported as static files:

**Update `package.json`:**
```json
{
  "scripts": {
    "build": "next build",
    "export": "next export"
  }
}
```

**Build and deploy:**
```bash
npm run build
npm run export
# The 'out' folder contains your static site
```

Or use the GitHub Pages deployment action (if not already set up).

## Automatic Updates

The GitHub Action will:
- Run every day at midnight UTC
- Fetch latest contribution data
- Update the JSON files
- Commit changes automatically
- Your site will show updated data on next visit

## Manual Update

To update contributions manually:

1. Go to GitHub → Actions tab
2. Select "Update GitHub Contributions"
3. Click "Run workflow"
4. Select branch (usually `main`)
5. Click "Run workflow" button

## File Structure

```
your-repo/
├── .github/
│   └── workflows/
│       └── update-contributions.yml    # Auto-update workflow
├── public/
│   └── data/
│       ├── contributions-2025.json     # Generated by script
│       └── contributions-2026.json     # Generated by script
├── scripts/
│   └── fetch-github-contributions.js   # Fetch script
└── src/
    └── components/
        └── GitHubContributionGraph.tsx # Reads JSON files
```

## How the Component Works

```javascript
// Component fetches from static JSON
fetch(`/data/contributions-${year}.json`)
  ↓
Reads pre-generated data
  ↓
Renders contribution graph
```

## Troubleshooting

### No data files generated

**Check GitHub Actions:**
1. Go to Actions tab
2. Check if workflow ran successfully
3. Look for error messages in logs

**Common issues:**
- Workflow needs to be enabled (check Settings → Actions)
- Check the workflow file is in `.github/workflows/`

### Data not updating

**Check workflow schedule:**
- Runs daily at 00:00 UTC
- May take a few minutes to complete
- Check Actions tab for recent runs

**Force update:**
- Go to Actions → Update GitHub Contributions
- Click "Run workflow"

### "Failed to load contributions" error

**Check files exist:**
```bash
ls public/data/
# Should show: contributions-2025.json, contributions-2026.json
```

**Check file format:**
```bash
cat public/data/contributions-2025.json
# Should be valid JSON
```

### GitHub Action fails

**Check the logs:**
1. Actions tab → Failed workflow
2. Click on the failed job
3. Read error messages

**Common fixes:**
- Make sure `scripts/fetch-github-contributions.js` exists
- Verify the script has no syntax errors
- Check that `public/data/` directory exists

## Comparison: GitHub Pages vs Vercel

### GitHub Pages (Static)
```
✓ Free hosting
✓ Simple setup
✓ No server needed
✗ Data updates via GitHub Actions (daily)
✗ Requires committing JSON files
```

### Vercel (Dynamic)
```
✓ Real-time data
✓ No committed JSON files
✓ Server-side API routes
✗ Requires environment variables
✗ Need to set up GITHUB_TOKEN
```

## Benefits of This Approach

✓ **No secrets needed** - Uses GitHub's built-in token
✓ **Automatic updates** - Runs daily without manual intervention
✓ **Version controlled** - Data changes are tracked in git
✓ **Fast loading** - Static JSON files load instantly
✓ **Works on GitHub Pages** - No server-side code required

## Adding More Years

To track additional years, update the script:

```javascript
// In scripts/fetch-github-contributions.js
const years = [2024, 2025, 2026]; // Add more years
```

Then run the workflow or script again.

## Rate Limits

- GitHub Actions: Uses built-in `GITHUB_TOKEN`
- Rate limit: 1,000 requests per hour
- This script: Uses 1 request per year
- Daily runs: Well within limits ✓

## Security Notes

✓ Uses GitHub's built-in `GITHUB_TOKEN` (scoped to your repo)
✓ No need to create personal access tokens
✓ Token never exposed in code or logs
✓ Data is public (contribution counts only)

---

**For Vercel/Netlify deployment**, see the API route approach in `ARCHITECTURE.md`


